<template name="Game">
    {{> Board}}
</template>

<template name="Board">
    <div id="board"
         class="{{#if currentTurn}}light{{else}}dark{{/if}}
             {{#if showTurn}} showTurn {{/if}}
             {{#if showMoves}} showMoves {{/if}}
             {{#if showCoordinates}} showCoordinates {{/if}}
             {{#if isRotated}} rotated {{/if}}">
      {{#each squares}}
        {{> Square}}
      {{/each}}
    </div>

    {{> Modal id="checkmate" title="title" body="body"
        buttonCancel="checkmate-leave" buttonAccept="checkmate-reset"
        buttonCancelLabel="cancel" buttonAcceptLabel="Save"
    }}
</template>

<template name="Square">
    <div id="{{position.row}}{{position.column}}"
         class="square
             {{#if isDark}}dark{{else}}light{{/if}}
             {{#if from}}selected{{/if}}
             {{#if isValid}}valid{{/if}}"
         data-row="{{position.row}}"
         data-column="{{position.column}}">
        <span class="{{#if empty}}empty{{/if}}
            {{#if selectable}}can-select{{/if}}
            {{#if isDarkPiece}}player-two{{/if}}">

            {{#if piece}}
                {{{piece.code}}}
            {{else}}
                &#9814;
            {{/if}}
        </span>
    </div>
</template>